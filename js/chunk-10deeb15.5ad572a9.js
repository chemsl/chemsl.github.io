(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10deeb15"],{8418:function(t,e,a){"use strict";var o=a("c04e"),l=a("9bf2"),n=a("5c6c");t.exports=function(t,e,a){var r=o(e);r in t?l.f(t,r,n(0,a)):t[r]=a}},"98fd":function(t,e,a){"use strict";var o=a("f1d3"),l=a.n(o);l.a},ee92:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticClass:"eltable",staticStyle:{width:"90%"},attrs:{"default-sort":{prop:"yydate",order:"ascending"},data:t.tableData.filter((function(e){return!t.search||e.name.toLowerCase().includes(t.search.toLowerCase())}))}},[a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),a("el-table-column",{attrs:{label:"性别",prop:"gender"}}),a("el-table-column",{attrs:{label:"年龄",prop:"age"}}),a("el-table-column",{attrs:{label:"预约日期",prop:"yydate"}}),a("el-table-column",{attrs:{label:"状态",prop:"status"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("诊断")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleSuccess(e.$index,e.row)}}},[t._v("完成")]),a("el-dialog",{attrs:{title:"信息处理",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{staticClass:"elform",attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"患者姓名","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"two",attrs:{autocomplete:"off",disabled:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),a("el-popover",{staticClass:"elpopover",attrs:{placement:"left",width:"350",trigger:"click"}},[a("el-table",{attrs:{data:t.cuslist}},[a("el-table-column",{attrs:{width:"150",property:"yydate",label:"日期"}}),a("el-table-column",{attrs:{width:"100",property:"zhenduancontent",label:"病情"}}),a("el-table-column",{attrs:{width:"100",property:"keshi",label:"科室"}})],1),a("el-button",{attrs:{slot:"reference",type:"primary"},on:{click:function(e){return t.getThisCusAllList(t.form)}},slot:"reference"},[t._v("查看过往病史")])],1)],1),a("el-form-item",{attrs:{label:"患者年龄","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"two",attrs:{autocomplete:"off",disabled:""},model:{value:t.form.age,callback:function(e){t.$set(t.form,"age",e)},expression:"form.age"}})],1),a("el-form-item",{attrs:{label:"患者病情","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),a("el-form-item",{attrs:{label:"选择药品","label-width":t.formLabelWidth}},[a("el-select",{staticClass:"elselct",attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入药品名称","remote-method":t.remoteMethod,loading:t.loading},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"success"},on:{click:t.selectSure}},[t._v("确 定")])],1)],1)]}}])},[a("template",{slot:"header"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"buginput",attrs:{type:"text",placeholder:"输入关键字搜索"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])],2)],1)],1)},l=[],n=(a("a4d3"),a("e01a"),a("d28b"),a("4de4"),a("c975"),a("d81d"),a("fb6a"),a("0d03"),a("b0c0"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("dc07")),r={props:["cuser"],data:function(){return{options:[],value:[],list:[],loading:!1,states:[],dialogTableVisible:!1,dialogFormVisible:!1,form:[],formLabelWidth:"120px",tableData:[],search:"",cuslist:[]}},created:function(){this.getYuyue(),this.yaoPinList()},methods:{change:function(t){},getThisCusAllList:function(t){var e=this;this.cuslist=[],Object(n["g"])(t).then((function(t){var a=!0,o=!1,l=void 0;try{for(var n,r=t[Symbol.iterator]();!(a=(n=r.next()).done);a=!0){var i=n.value;i.yydate=new Date(i.yydate).toLocaleDateString()+new Date(i.yydate).toLocaleTimeString(),e.cuslist.push(i)}}catch(s){o=!0,l=s}finally{try{a||null==r.return||r.return()}finally{if(o)throw l}}}))},selectSure:function(){var t=this;this.form.medicine=this.value,console.log(this.form),Object(n["k"])(this.form).then((function(t){})),"排队中"===this.form.status?Object(n["m"])(this.form).then((function(e){t.dialogFormVisible=!1,t.$router.go("/index/patient")})):this.dialogFormVisible=!1},yaoPinList:function(){var t=this;Object(n["n"])().then((function(e){for(var a=0;a<e.length;a++)t.states.push(e[a].name);t.list=t.states.map((function(t){return{value:"".concat(t),label:"label:".concat(t)}}))}))},getYuyue:function(){var t=this;Object(n["h"])().then((function(e){var a,o,l,n,r,i;function s(t){return t.length<=1&&(t="0"+t),t}t.tableData=[];var c=!0,u=!1,d=void 0;try{for(var f,m=e[Symbol.iterator]();!(c=(f=m.next()).done);c=!0){var b=f.value;if(a=new Date(b.yydate).getFullYear().toString(),o=(new Date(b.yydate).getMonth()+1).toString(),l=new Date(b.yydate).getDate().toString(),n=new Date(b.yydate).getHours().toString(),r=new Date(b.yydate).getMinutes().toString(),i=new Date(b.yydate).getSeconds().toString(),a=s(a),o=s(o),l=s(l),n=s(n),r=s(r),i=s(i),b.doctorid===t.cuser.email){console.log(b.yydate),b.yydate=a+"-"+o+"-"+l,b.yd=a+"/"+o+"/"+l+"/"+n+":"+r+":"+i,console.log(b.yd);var h=b.idcard.slice(6,10),y=b.idcard.slice(10,12),p=b.idcard.slice(12,14),g=h+"-"+y+"-"+p;b.age=t.jsGetAge(g),"1"==b.yynum&&(b.yydate=b.yydate+":08:05"),"2"==b.yynum&&(b.yydate=b.yydate+":09:05"),"3"==b.yynum&&(b.yydate=b.yydate+":10:00"),t.tableData.push(b),console.log(t.tableData)}}}catch(v){u=!0,d=v}finally{try{c||null==m.return||m.return()}finally{if(u)throw d}}}))},jsGetAge:function(t){t=t=new Date(t);var e=new Date,a=e.getFullYear()-t.getFullYear()-(e.getMonth()<t.getMonth()||e.getMonth()==t.getMonth()&&e.getDate()<t.getDate()?1:0);return a},remoteMethod:function(t){var e=this;""!==t?(this.loading=!0,setTimeout((function(){e.loading=!1,e.options=e.list.filter((function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1}))}),200)):this.options=[]},handleEdit:function(t,e){this.form=e,this.dialogFormVisible=!0},handleSuccess:function(t,e){var a=this;console.log(this.form),"排队中"==e.status?alert("请诊断"):Object(n["j"])(e).then((function(t){console.log(t),a.$router.go("/index/patient")}))}}},i=r,s=(a("98fd"),a("2877")),c=Object(s["a"])(i,o,l,!1,null,null,null);e["default"]=c.exports},f1d3:function(t,e,a){},fb6a:function(t,e,a){"use strict";var o=a("23e7"),l=a("861d"),n=a("e8b5"),r=a("23cb"),i=a("50c4"),s=a("fc6a"),c=a("8418"),u=a("1dde"),d=a("b622"),f=d("species"),m=[].slice,b=Math.max;o({target:"Array",proto:!0,forced:!u("slice")},{slice:function(t,e){var a,o,u,d=s(this),h=i(d.length),y=r(t,h),p=r(void 0===e?h:e,h);if(n(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?l(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return m.call(d,y,p);for(o=new(void 0===a?Array:a)(b(p-y,0)),u=0;y<p;y++,u++)y in d&&c(o,u,d[y]);return o.length=u,o}})}}]);
//# sourceMappingURL=chunk-10deeb15.5ad572a9.js.map