(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-832a5014"],{1569:function(t,e,a){"use strict";var o=a("2884"),l=a.n(o);l.a},2884:function(t,e,a){},a15b:function(t,e,a){"use strict";var o=a("23e7"),l=a("44ad"),r=a("fc6a"),i=a("b301"),n=[].join,s=l!=Object,c=i("join",",");o({target:"Array",proto:!0,forced:s||c},{join:function(t){return n.call(r(this),void 0===t?",":t)}})},b33d:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticClass:"eltable",staticStyle:{width:"90%"},attrs:{"default-sort":{prop:"yydate",order:"descending"},data:t.tableData.filter((function(e){return!t.searchH||e.name.toLowerCase().includes(t.searchH.toLowerCase())}))}},[a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),a("el-table-column",{attrs:{label:"性别",prop:"gender"}}),a("el-table-column",{attrs:{label:"年龄",prop:"age"}}),a("el-table-column",{attrs:{label:"预约日期",prop:"yydate"}}),a("el-table-column",{attrs:{label:"状态",prop:"status"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("查看")]),a("el-dialog",{attrs:{title:"信息处理",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{staticClass:"elform",attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"患者姓名","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"two",attrs:{autocomplete:"off",disabled:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),a("el-popover",{staticClass:"elpopover",attrs:{placement:"left",width:"350",trigger:"click"}},[a("el-table",{attrs:{data:t.cuslist}},[a("el-table-column",{attrs:{width:"150",property:"yydate",label:"日期"}}),a("el-table-column",{attrs:{width:"100",property:"zhenduancontent",label:"病情"}}),a("el-table-column",{attrs:{width:"100",property:"keshi",label:"科室"}})],1),a("el-button",{attrs:{slot:"reference",type:"primary"},on:{click:function(e){return t.getThisCusAllList(t.form)}},slot:"reference"},[t._v("查看过往病史")])],1)],1),a("el-form-item",{attrs:{label:"患者年龄","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"two",attrs:{autocomplete:"off",disabled:""},model:{value:t.form.age,callback:function(e){t.$set(t.form,"age",e)},expression:"form.age"}})],1),a("el-form-item",{attrs:{label:"患者病情","label-width":t.formLabelWidth}},[a("el-input",{attrs:{disabled:"",autocomplete:"off",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),a("el-form-item",{attrs:{label:"开药","label-width":t.formLabelWidth}},[a("el-input",{attrs:{disabled:"",autocomplete:"off",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.form.str,callback:function(e){t.$set(t.form,"str",e)},expression:"form.str"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"success"},on:{click:t.selectSure}},[t._v("确 定")])],1)],1)]}}])},[a("template",{slot:"header"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchH,expression:"searchH"}],staticClass:"buginput",attrs:{type:"text",placeholder:"输入关键字搜索"},domProps:{value:t.searchH},on:{input:function(e){e.target.composing||(t.searchH=e.target.value)}}})])],2)],1)],1)},l=[],r=(a("a4d3"),a("e01a"),a("d28b"),a("4de4"),a("c975"),a("a15b"),a("d81d"),a("0d03"),a("b0c0"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("dc07")),i={props:["cuser"],data:function(){return{options:[],value:[],list:[],loading:!1,states:[],dialogTableVisible:!1,dialogFormVisible:!1,form:[],formLabelWidth:"120px",tableData:[],searchH:"",cuslist:[]}},created:function(){this.getHistoryCuer(),this.yaoPinList()},methods:{getThisCusAllList:function(t){var e=this;this.cuslist=[],Object(r["g"])(t).then((function(t){var a=!0,o=!1,l=void 0;try{for(var r,i=t[Symbol.iterator]();!(a=(r=i.next()).done);a=!0){var n=r.value;n.yydate=new Date(n.yydate).toLocaleDateString()+new Date(n.yydate).toLocaleTimeString(),e.cuslist.push(n)}}catch(s){o=!0,l=s}finally{try{a||null==i.return||i.return()}finally{if(o)throw l}}}))},selectSure:function(){var t=this;this.form.medicine=this.value,Object(r["k"])(this.form).then((function(t){console.log(t)})),"排队中"===this.form.status?Object(r["m"])(this.form).then((function(e){t.dialogFormVisible=!1,t.$router.go("/index/patient")})):this.dialogFormVisible=!1},yaoPinList:function(){var t=this;Object(r["n"])().then((function(e){for(var a=0;a<e.length;a++)t.states.push(e[a].name);t.list=t.states.map((function(t){return{value:"".concat(t),label:"label:".concat(t)}}))}))},getHistoryCuer:function(){var t=this;Object(r["e"])(this.cuser).then((function(e){var a,o,l,r,i,n;function s(t){return t.length<=1&&(t="0"+t),t}t.tableData=[];var c=!0,u=!1,d=void 0;try{for(var f,m=e[Symbol.iterator]();!(c=(f=m.next()).done);c=!0){var b=f.value;a=new Date(b.yydate).getFullYear().toString(),o=(new Date(b.yydate).getMonth()+1).toString(),l=new Date(b.yydate).getDate().toString(),r=new Date(b.yydate).getHours().toString(),i=new Date(b.yydate).getMinutes().toString(),n=new Date(b.yydate).getSeconds().toString(),a=s(a),o=s(o),l=s(l),r=s(r),i=s(i),n=s(n),b.doctorid===t.cuser.email&&(b.yydate=a+"/"+o+"/"+l+"/"+r+":"+i+":"+n,"问诊完成"==b.status&&t.tableData.push(b))}}catch(h){u=!0,d=h}finally{try{c||null==m.return||m.return()}finally{if(u)throw d}}}))},remoteMethod:function(t){var e=this;""!==t?(this.loading=!0,setTimeout((function(){e.loading=!1,e.options=e.list.filter((function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1}))}),200)):this.options=[]},handleEdit:function(t,e){var a="";this.form=e,a=this.form.medicine.join("\n"),this.form.str=a,this.dialogFormVisible=!0},handleSuccess:function(t,e){var a=this;console.log(t,e),"排队中"==e.status?alert("请诊断"):Object(r["j"])(e).then((function(t){console.log(t),a.$router.go("/index/patient")}))}}},n=i,s=(a("1569"),a("2877")),c=Object(s["a"])(n,o,l,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-832a5014.96cd5c22.js.map